@using RestWebAppl.Models.ViewModels;
@model CartIndexViewModel
@if(Model.Cart.Lines.Count()>0){
<div class="push">
<h1>Ваша корзина</h1>
<div class="d-flex flex-column">
<table class="table table-striped justify-content-center">
	<thead>
		<tr>
			<th>Количество</th>
			<th>Товар</th>
			<th class="text-right">Цена</th>
			<th class="text-right">Итог</th>
		</tr>
	</thead>
	<tbody>
		@foreach(var p in Model.Cart.Lines)
		{
			<tr>
				<td class="text-center">@p.Quantity</td>
				<td class="text-left">@p.Item.Name</td>
				<td class="text-right">@p.Item.Price.ToString("c")</td>
				<td class="text-right">@((p.Quantity*p.Item.Price).ToString("c"))</td>
				<td>
					<form asp-action="RemoveFormCart"method="post">
						<input type="hidden" name="id" value="@p.Item.Id">
						<input type="hidden" name="returnUrl" value="@Model.ReturnUrl">
						<button type="submit" class="btn btn-sm btn-danger">
							Удалить
						</button>
					</form>
				</td>
			</tr>
		}
	</tbody>
		<tfoot>
			<tr>
				<td colspan="3" class="text-right">Всего:</td>
				<td class="text-right">
					@Model.Cart.ComputeTotalValue().ToString("c")
				</td>
			</tr>
		</tfoot>
</table> 
<div class="text-center">
	<a class="btn btn-primary" asp-action="Checkout"asp-controller="Order">Оформить заказ</a>
</div>
</div>
</div>
}